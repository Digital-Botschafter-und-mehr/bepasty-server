{% extends "_layout.html" %}

{% block content %}
<div class="panel panel-default">
    <div class="panel-heading">
        <h1>
            {{ item.meta['filename'] }}
            <div class="btn-group pull-right">
                <button id="dl-btn" type="button" class="btn btn-info">
                    <span class="glyphicon glyphicon-download-alt"></span> Download
                </button>
                {% if may(DELETE) %}
                <button id="del-btn" type="button" class="btn btn-danger">
                    <span class="glyphicon glyphicon-remove"></span> Delete
                </button>
                {% endif %}
            </div>
        </h1>
    </div>
    <div class="panel-body">
        <p>
        Type {{ item.meta.get('type') or 'undefined' }}, Size {{ item.meta['size'] }} bytes, uploaded {{ item.meta['timestamp-upload'] | datetime }}.
        <br/>
        SHA256-Hash: {{ item.meta.get('hash')}}
        </p>
        <div class="data">
            {{ rendered_content }}
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_script %}
<script src="{{ url_for('static', filename='bootbox/bootbox.min.js') }}" type="text/javascript"></script>
<script type="text/javascript">
$("#del-btn").click(function(){
    bootbox.confirm("Are you sure you want to delete this file?", function(result) {
        if (result == true){
            window.location.replace("{{ url_for('bepasty.delete', name=name) }}");
        }
    }); 
});
</script>
{% endblock extra_script %}
